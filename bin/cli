#!/usr/bin/env node

const guardian = require('../lib').default;
const readConfig = require('../lib/read-config').default;

const { config: configPath } = require('yargs')
  .scriptName('guardian')
  .usage('$0 [args]')
  .option('config', {
    type: 'string',
    describe: 'YAML config file',
  })
  .help()
  .demandOption('config').argv;

const config = readConfig(configPath);

// run guardian
guardian(config);
